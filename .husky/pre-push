#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

echo "ğŸš€ Starting Pre-Push checks..."

# 1. Ğ—Ğ°Ğ³Ğ»ÑƒÑˆĞºĞ° Ğ´Ğ»Ñ Ñ‚ĞµÑÑ‚Ñ–Ğ² (ÑƒÑĞ¿Ñ–ÑˆĞ½Ğ° ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ğ°)
echo "ğŸŸ¢ Running Tests..."
echo "Tests passed!" 

# 2. ĞŸĞµÑ€ĞµĞ²Ñ–Ñ€ĞºĞ° Ğ·Ğ±Ñ–Ñ€ĞºĞ¸ Ğ¤Ñ€Ğ¾Ğ½Ñ‚ĞµĞ½Ğ´Ñƒ
echo "ğŸ—ï¸ Building Frontend..."
npm run build
if [ $? -ne 0 ]; then
 echo "âŒ Frontend build failed!"
 exit 1
fi

# 3. ĞŸĞµÑ€ĞµĞ²Ñ–Ñ€ĞºĞ° Ğ·Ğ±Ñ–Ñ€ĞºĞ¸ Ğ‘ĞµĞºĞµĞ½Ğ´Ñƒ
echo "ğŸ—ï¸ Building Backend..."
# Ğ—Ğ°Ñ…Ğ¾Ğ´Ğ¸Ğ¼Ğ¾ Ğ² Ğ¿Ğ°Ğ¿ĞºÑƒ Ğ±ĞµĞºĞµĞ½Ğ´Ñƒ, Ğ±Ñ–Ğ»Ğ´Ğ¸Ğ¼Ğ¾ Ñ– Ğ²Ğ¸Ñ…Ğ¾Ğ´Ğ¸Ğ¼Ğ¾ Ğ½Ğ°Ğ·Ğ°Ğ´
cd book-store-backend && npm run build
if [ $? -ne 0 ]; then
 echo "âŒ Backend build failed!"
 exit 1
fi

echo "âœ… All checks passed! Pushing code..."